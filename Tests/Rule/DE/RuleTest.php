<?php

declare(strict_types=1);

namespace Iban\Generation\Tests\Rule\DE;

use Iban\Generation\Rule\DE\Rule000300;
use Iban\Generation\Rule\DE\Rule000400;
use PHPUnit\Framework\TestCase;

/**
 * @author Jan SchÃ¤dlich <mail@janschaedlich.de>
 */
class RuleTest extends TestCase
{
    /**
     * @dataProvider dataProvider
     */
    public function testIbanGeneration(string $version, string $excpectedIban, string $bankIdentifier, string $accountNumber)
    {
        $class = '\\Iban\\Generation\\Rule\\DE\\Rule' . $version;
        $rule = new $class('DE', $bankIdentifier, $accountNumber);
        $actualIban = $rule->generateIban();

        $this->assertEquals($excpectedIban, $actualIban);
    }

    public function dataProvider(): iterable
    {
        yield ['000200', '', '72020700', '1000000860'];
        yield ['000200', '', '72020700', '1000000600'];
        yield ['000200', 'DE05720207000012345678', '72020700', '12345678'];

        yield ['000300', '', '51010800', '6161604670'];
        yield ['000300', 'DE29510108000012345678', '51010800', '12345678'];

        yield ['000400', 'DE86100500000990021440', '10050000', '135'];
        yield ['000400', 'DE19100500006600012020', '10050000', '1111'];
        yield ['000400', 'DE73100500000920019005', '10050000', '1900'];
        yield ['000400', 'DE48100500000780008006', '10050000', '7878'];
        yield ['000400', 'DE43100500000250030942', '10050000', '8888'];
        yield ['000400', 'DE60100500001653524703', '10050000', '9595'];
        yield ['000400', 'DE15100500000013044150', '10050000', '97097'];
        yield ['000400', 'DE54100500000630025819', '10050000', '112233'];
        yield ['000400', 'DE22100500006604058903', '10050000', '336666'];
        yield ['000400', 'DE43100500000920018963', '10050000', '484848'];

        yield ['005200', 'DE38600501010002662604', '67220020', '5308810004'];

        yield ['005300', 'DE94600501017401555913', '55050000', '35000'];

        yield ['005600', 'DE29380101111010240003', '38010111', '36'];
        yield ['005600', 'DE55480101111328506100', '48010111', '50'];
        yield ['005600', 'DE26430101111826063000', '43010111', '99'];
        yield ['005600', 'DE52250101111015597802', '25010111', '110'];
        yield ['005600', 'DE13380101111010240000', '38010111', '240'];
        yield ['005600', 'DE15380101111011296100', '38010111', '333'];
        yield ['005600', 'DE54100101111600220800', '10010111', '555'];
        yield ['005600', 'DE42390101111000556100', '39010111', '556'];
        yield ['005600', 'DE70250101111967153801', '25010111', '606'];
        yield ['005600', 'DE92265101111070088000', '26510111', '700'];
        yield ['005600', 'DE72250101111006015200', '25010111', '777'];
        yield ['005600', 'DE83380101111010240001', '38010111', '999'];
        yield ['005600', 'DE91250101111369152400', '25010111', '1234'];
        yield ['005600', 'DE48570101111017500000', '57010111', '1313'];
        yield ['005600', 'DE81370101111241113000', '37010111', '1888'];
        yield ['005600', 'DE30250101111026500901', '25010111', '1953'];
        yield ['005600', 'DE47670101111547620500', '67010111', '1998'];
        yield ['005600', 'DE62250101111026500907', '25010111', '2007'];
        yield ['005600', 'DE45370101111635100100', '37010111', '4004'];
        yield ['005600', 'DE88670101111304610900', '67010111', '4444'];
        yield ['005600', 'DE20250101111395676000', '25010111', '5000'];
        yield ['005600', 'DE96290101111611754300', '29010111', '5510'];
        yield ['005600', 'DE43500101111000400200', '50010111', '6060'];
        yield ['005600', 'DE02670101111296401301', '67010111', '6800'];
        yield ['005600', 'DE13380101111027758200', '38010111', '55555'];
        yield ['005600', 'DE98500101111005007001', '50010111', '60000'];
        yield ['005600', 'DE49200101111798758900', '20010111', '666666'];
        yield ['005600', 'DE59370101111837501600', '37010111', '102030'];
        yield ['005600', 'DE48700101111249461502', '70010111', '121212'];
        yield ['005600', 'DE78300101111413482100', '30010111', '130500'];
        yield ['005600', 'DE24370101111213431002', '37010111', '202020'];
        yield ['005600', 'DE59380101111010555101', '38010111', '414141'];
        yield ['005600', 'DE49200101111798758900', '20010111', '666666'];
        yield ['005600', 'DE62370101111403124100', '37010111','5000000'];
        yield ['005600', 'DE17600101111045720000', '60010111','500500500'];
    }
}
